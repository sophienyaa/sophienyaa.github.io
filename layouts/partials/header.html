<script>
  //this seems to work correctly when here, so whatever
  const darkThemeMq = window.matchMedia("(prefers-color-scheme: dark)");
  darkThemeMq.addListener(e => {
   if (e.matches) {
        document.documentElement.setAttribute('data-theme', 'dark');
        localStorage.setItem('theme', 'dark');
   } else {
        document.documentElement.setAttribute('data-theme', 'light');
        localStorage.setItem('theme', 'light');
    }
  });

  function switchTheme() {
      const currentTheme = document.documentElement.getAttribute('data-theme');
      if (currentTheme === 'dark') {
          document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
      }
      else {       
          document.documentElement.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
      }    
  }
</script>

<!-- site header bar -->
<header>
    <section>
        <div class="header row">
            <div class="header__item row" style="margin-left: 0;">
               <div id="logo"> 
                  {{ if .Site.Params.logo }}
                  <a href="{{ .Site.BaseURL }}">
                    <img class="u-logo" src="{{ .Site.Params.logo | absURL }}"/>
                  </a>
                  {{ end }}
                </div>
                <div>
                  <a id="site__name" href="{{ .Site.BaseURL }}">
                    {{ .Site.Title }}
                  </a>
                  <!-- toggle for dark/light mode -->
                  <div class="rhs_item">
                    <a href="#" onclick="switchTheme()">â˜¾</a>
                  </div>
                </div>
            </div>
        </div>

          <!-- TODO: build these as menu items -->
            <!-- <div class="flex row">
              <nav aria-label="page menu" class="flex row">
                  <ul role="menubar" class="flex row">
                      <li role="none">
                          <a class="menu__item" href="{{ .Site.BaseURL }}">
                              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"
                                  fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                  stroke-linejoin="round">
                                  <path
                                      d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" />
                              </svg>
                          </a>
                      </li>
                      {{ range .AlternativeOutputFormats -}}
                      <li role="none">
                          <a class="menu__item" href="{{ .Permalink }}">
                              {{.Name | lower }}
                          </a>
                      </li>
                      {{ end -}}
                  </ul>
              </nav>
          </div> -->
      </div>
    </section>
</header>
